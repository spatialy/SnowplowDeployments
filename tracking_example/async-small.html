<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">
<!--
     ! Copyright (c) 2012-2013 Snowplow Analytics Ltd. All rights reserved.
     !
     ! This program is licensed to you under the Apache License Version 2.0,
     ! and you may not use this file except in compliance with the Apache License Version 2.0.
     ! You may obtain a copy of the Apache License Version 2.0 at http://www.apache.org/licenses/LICENSE-2.0.
     !
     ! Unless required by applicable law or agreed to in writing,
     ! software distributed under the Apache License Version 2.0 is distributed on an
     ! "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     ! See the Apache License Version 2.0 for the specific language governing permissions and limitations there under.
   -->
<html>
  <head>
    <title>Example of tracking on jyllands-posten</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <!-- Snowplow starts plowing -->
    <script type="text/javascript">

     ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];
         p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)
         };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;
         n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","//d1fc8wv8zag5ca.cloudfront.net/2.7.0/sp.js","jp_snowplow"));

     window.jp_snowplow('newTracker', 'cf', 'sp1.aws.jyllands-posten.dk', { // Initialise a tracker
         encodeBase64: false, // Default is true
                                                                         appId: 'prod.jyllands-posten.dk', 
                                                                         cookieDomain: '.jyllands-posten.dk',
                                                                         respectDoNotTrack: true,
                                                                         cookieName: "_sp_jp_1_",
                                                                         platform: 'web',
                                                                         contexts: {
                                                                             webPage: true,
                                                                             gaCookies: true,
                                                                             performanceTiming: true
                                                                         }
     });

     window.jp_snowplow('setUserId', '8553ce94-272d-4314-90a1-f9857e15c202'); //should be sso if loggedin otherwise jpmuid
     window.jp_snowplow('trackPageView', null, [ 
                                              {
                                                  schema: "iglu:dk.jyllands-posten/user/jsonschema/2-0-0",
                                                  data:{
                                                      "anon_id": "8553ce94-272d-4314-90a1-f9857e15c201",
                                                      "user_id": "8553ce94-272d-4314-90a1-f9857e15c202",
                                                      "user_authenticated": "yes",
                                                      "user_authorized": "yes",
                                                      "ab_group": "50"
                                                  }
                                              },
                                              {
                                                  schema: "iglu:dk.jyllands-posten/page_view/jsonschema/1-0-0",
                                                  data:
                                                       {
                                                           "section_id": 1,
                                                           "section_name": "Forside",
                                                           "content_id": 1234567,
                                                           "content_type": "default",
                                                           "page_name": "jplive.forside.sec",
                                                           "page_type": "sec",
                                                           "page_restricted":"no",
                                                           "site":"test.dk",
                                                           "sub_site":"premium",
                                                           "editorial_category": "sport"

                                                       }
                                              }

     ]);

    </script>
    <!-- Snowplow stops plowing -->
  </head>

  <body>
    <h1>Small_asynchronous_examples_for_snowplow.js</h1>

    <p>Warning: if your browser's Do Not Track feature is enabled and respectDoNotTrack is enabled, all tracking will be prevented.</p>
    <p>If you are viewing the page using a file URL, you must edit the script URL in the Snowplow tag to include an http scheme. Otherwise a file scheme will be inferred and the page will attempt to load sp.js from the local filesystem..</p>

    <p>Press the buttons below to trigger individual tracking events:<br>
      <button type="button" onclick="playMix()">Play a mix</button><br>
      <button type="button" onclick="addProduct()">Add a product</button><br>
      <button type="button" onclick="viewProduct()">View a product</button><br>
      <button type="button" onclick="addEcommerceTransaction()">Add an ecommerce transaction</button>
    </p>
    <a href=http://en.wikipedia.org/wiki/Main_Page id=legal target="_blank" class="link out">Link</a>
    <br>
    <a href=http://en.wikipedia.org/wiki/Main_Page id=illegal class="class barred">Ignored link</a>

  </body>

</html>
